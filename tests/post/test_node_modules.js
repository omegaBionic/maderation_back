var request = require('supertest')('http://localhost:8085');

describe('/api/post/post_datas', function() {
        it('returns 200 status - ok', function(done) {
            this.timeout(10000);
            request
                .post('/api/post/post_datas?key=993b06009dce6a9962esecf49801d32e')
                .send('{"0": {"status":"add", "table":"madera_address_client", "values": {"city":{"S":"test95495156166516659"},"idAddressClient":{"S":"100000"},"country":{"S":"france"},"postalCode":{"N":"test95495156166516659"},"street":{"S":"test95495156166516659"}}}}')
                .expect(200, done);
        });
        it('returns 200 status - ok', function(done) {
            this.timeout(10000);
            request
                .post('/api/post/post_datas?key=993b06009dce6a9962esecf49801d32e')
                .send('{"0": {"status":"delete", "table":"madera_address_client", "values": {"city":{"S":"test95495156166516659"},"idAddressClient":{"S":"100000"},"country":{"S":"france"},"postalCode":{"N":"test95495156166516659"},"street":{"S":"test95495156166516659"}}}}')
                .expect(200, done);
        });
        it('returns 200 status - is json', function(done) {
            this.timeout(10000);
            request
                .post('/api/post/post_datas?key=993b06009dce6a9962esecf49801d32e')
                .expect('Content-Type', /json/, done);
        });
        it('returns 500 status - bad key', function(done) {
            request
                .post('/api/post/post_datas?key=bad-key_52cbba19c')
                .expect(500, done);
        });
        it('returns 500 status - bad parameter', function(done) {
            request
                .post('/api/post/post_datas?bad_parameter=993b06009dce6a9962esecf49801d32e')
                .expect(500, done);
        });
});